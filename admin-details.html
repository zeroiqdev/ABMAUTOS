<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Booking Details</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet" />
    <style>
        body { font-family: 'Inter', sans-serif; background: #0a0a0a; color: #fff; margin: 0; }
        .container { width: min(900px, 94%); margin: 2rem auto; }
        a { color: #ef4444; text-decoration: none; }
        .card { background: #0f0f0f; border: 1px solid #1a1a1a; border-radius: 12px; padding: 1rem; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        .section { margin-bottom: 1rem; }
        .label { color: #9aa1ac; font-size: 0.85rem; }
        .value { color: #fff; font-size: 1rem; margin-top: 0.25rem; }
        .badges { display: flex; flex-wrap: wrap; gap: 0.35rem; }
        .badge { display: inline-block; padding: 0.25rem 0.5rem; border: 1px solid #1a1a1a; border-radius: 999px; background: #141414; font-size: 0.8rem; }
        .label-strong { font-weight: 700; }
    </style>
</head>
<body>
    <div class="container">
        <p><a href="admin.html">← Back to Admin</a></p>
        <h1>Booking Details</h1>
        <div id="content" class="card"></div>
    </div>
    <script>
        function getParam(name) {
            const params = new URLSearchParams(window.location.search);
            return params.get(name);
        }
        function escapeHtml(s) { return (s || '').replace(/</g, '&lt;'); }
        function render() {
            const id = getParam('id');
            let data = [];
            try { data = JSON.parse(localStorage.getItem('abm_admin_bookings') || '[]'); } catch (e) {}
            const booking = data.find(b => b.createdAt === id);
            const mount = document.getElementById('content');
            if (!booking) {
                mount.innerHTML = '<div class="section">Booking not found.</div>';
                return;
            }
            mount.innerHTML = `
                <div class="section"><span class="label">Created</span><div class="value">${new Date(booking.createdAt).toLocaleString()}</div></div>
                <div class="grid">
                    <div class="section"><span class="label">Name</span><div class="value">${escapeHtml(booking.contact?.name)}</div></div>
                    <div class="section"><span class="label">Phone</span><div class="value">${escapeHtml(booking.contact?.phone)}</div></div>
                </div>
                <div class="section"><span class="label">Appointment Date</span><div class="value">${escapeHtml(booking.date)}</div></div>
                <div class="section"><span class="label">Services</span><div class="badges">${(booking.services||[]).map(s => `<span class=\"badge\">${escapeHtml(s)}</span>`).join('') || '<span class="value">—</span>'}</div></div>
                <div class="section"><span class="label">Specific Issue</span><div class="badges">${(booking.suggestions||[]).map(s => `<span class=\"badge\">${escapeHtml(s)}</span>`).join('') || '<span class="value">—</span>'}</div></div>
                <div class="section"><span class="label">Description</span><div class="value" style="white-space: pre-wrap;">${escapeHtml(booking.description)}</div></div>
            `;
        }
        render();
    </script>
</body>
</html>

